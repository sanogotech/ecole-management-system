<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portail TDD & Spring Boot</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --light-bg: #f8f9fa;
      --dark-bg: #343a40;
      --tdd-red: #e74c3c;
      --spring-green: #27ae60;
      --test-blue: #3498db;
    }

    body {
      background-color: var(--light-bg);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .navbar {
      background-color: var(--primary-color);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .navbar-brand {
      font-weight: 700;
      color: white;
    }

    .hero-section {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--tdd-red) 100%);
      color: white;
      padding: 4rem 0;
      margin-bottom: 3rem;
      border-radius: 0 0 20px 20px;
    }

    .card {
      border: none;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      height: 100%;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }

    .card-header {
      background-color: var(--primary-color);
      color: white;
      font-weight: 600;
    }

    .tdd-card .card-header {
      background-color: var(--tdd-red);
    }

    .spring-card .card-header {
      background-color: var(--spring-green);
    }

    .test-card .card-header {
      background-color: var(--test-blue);
    }

    .module-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--secondary-color);
    }

    .btn-tdd {
      background-color: var(--tdd-red);
      color: white;
    }

    .btn-tdd:hover {
      background-color: #c0392b;
      color: white;
    }

    .btn-spring {
      background-color: var(--spring-green);
      color: white;
    }

    .btn-spring:hover {
      background-color: #219955;
      color: white;
    }

    .btn-test {
      background-color: var(--test-blue);
      color: white;
    }

    .btn-test:hover {
      background-color: #2980b9;
      color: white;
    }

    .simulation-container {
      background-color: white;
      border-radius: 10px;
      padding: 2rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }

    .process-step {
      position: relative;
      padding-left: 30px;
      margin-bottom: 20px;
    }

    .process-step:before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 20px;
      height: 20px;
      background-color: var(--tdd-red);
      border-radius: 50%;
    }

    .process-step:after {
      content: "";
      position: absolute;
      left: 9px;
      top: 20px;
      width: 2px;
      height: 100%;
      background-color: var(--tdd-red);
    }

    .process-step:last-child:after {
      display: none;
    }

    .highlight-box {
      background-color: rgba(231, 76, 60, 0.1);
      border-left: 4px solid var(--tdd-red);
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0 5px 5px 0;
    }

    .spring-highlight {
      background-color: rgba(39, 174, 96, 0.1);
      border-left: 4px solid var(--spring-green);
    }

    .test-highlight {
      background-color: rgba(52, 152, 219, 0.1);
      border-left: 4px solid var(--test-blue);
    }

    footer {
      background-color: var(--dark-bg);
      color: white;
      padding: 2rem 0;
      margin-top: 3rem;
    }

    /* Animation pour les cartes */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .module-card {
      animation: fadeIn 0.5s ease forwards;
      opacity: 0;
    }

    /* Délai d'animation pour chaque carte */
    .module-card:nth-child(1) { animation-delay: 0.1s; }
    .module-card:nth-child(2) { animation-delay: 0.2s; }
    .module-card:nth-child(3) { animation-delay: 0.3s; }
    .module-card:nth-child(4) { animation-delay: 0.4s; }
    .module-card:nth-child(5) { animation-delay: 0.5s; }
    .module-card:nth-child(6) { animation-delay: 0.6s; }
    .module-card:nth-child(7) { animation-delay: 0.7s; }

    /* Diagram styles */
    .diagram-container {
      background-color: white;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      height: 400px;
      position: relative;
      overflow: auto;
    }

    .diagram-placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #666;
      font-style: italic;
    }

    .diagram-element {
      position: absolute;
      border: 2px solid #333;
      padding: 5px;
      cursor: move;
    }

    .code-block {
      background-color: #f8f9fa;
      border-radius: 5px;
      padding: 15px;
      font-family: 'Courier New', Courier, monospace;
      overflow-x: auto;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .hero-section {
        padding: 2rem 0;
      }

      .module-icon {
        font-size: 1.5rem;
      }
    }
	
	 .practice-list {
    list-style-type: none;
    padding-left: 0;
    counter-reset: practice-counter;
  }
  
  .practice-list li {
    counter-increment: practice-counter;
    margin-bottom: 1.5rem;
    padding-left: 2.5rem;
    position: relative;
    border-left: 3px solid #eee;
    padding-bottom: 0.5rem;
  }
  
  .practice-list li::before {
    content: counter(practice-counter);
    position: absolute;
    left: 0;
    top: 0;
    background: var(--primary-color);
    color: white;
    width: 1.8rem;
    height: 1.8rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    font-weight: bold;
  }
  
  .practice-list li strong {
    color: var(--primary-color);
    font-size: 1.1rem;
  }
  
  .practice-list li p {
    margin-bottom: 0;
    margin-top: 0.3rem;
    color: #666;
  }
  
  .quality-metrics .metric {
    margin-bottom: 1rem;
  }
  
  .metric-label {
    font-weight: 500;
    margin-bottom: 0.3rem;
  }
  
  .progress {
    height: 1.5rem;
    border-radius: 0.3rem;
    background-color: #f5f5f5;
  }
  
  .testing-quality-explanation {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  max-width: 900px;
  margin: 2rem auto;
}

.myth-reality {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin: 2rem 0;
}

@media (max-width: 768px) {
  .myth-reality {
    grid-template-columns: 1fr;
  }
}

.myth, .reality {
  padding: 1.5rem;
  border-radius: 8px;
}

.myth {
  background-color: #fff8f8;
  border-left: 4px solid #ff6b6b;
}

.reality {
  background-color: #f8fff8;
  border-left: 4px solid #51cf66;
}

.coverage-limitations .list-group-item {
  padding: 1rem;
  margin-bottom: 0.5rem;
  border-left: 3px solid #fcc419;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1rem;
}

.metric-card {
  border: 1px solid #dee2e6;
  border-radius: 8px;
  overflow: hidden;
}

.metric-header {
  background-color: #2c3e50;
  color: white;
  padding: 0.75rem;
  font-weight: 600;
}

.metric-body {
  padding: 1rem;
  background-color: white;
}

.metric-body code {
  display: block;
  background: #f8f9fa;
  padding: 0.75rem;
  margin-top: 0.5rem;
  border-radius: 4px;
  font-size: 0.9em;
}

.example {
  margin-top: 0.5rem;
  font-family: monospace;
  background: #f1f3f5;
  padding: 0.5rem;
  border-radius: 4px;
  font-size: 0.9em;
}

.badge {
  margin: 0.3rem 0;
}
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark mb-4">
    <div class="container">
      <a class="navbar-brand" href="#">
        <i class="bi bi-code-square me-2"></i>Portail TDD & Spring Boot
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link active" href="#tdd">TDD</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#spring-boot">Spring Boot</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#tests">Tests</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#bonnes-pratiques">Bonnes pratiques</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#cas-pratiques">Cas pratiques</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#ressources">Ressources</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <section class="hero-section">
    <div class="container text-center">
      <h1 class="display-4 fw-bold mb-3">Maîtrisez le TDD avec Spring Boot</h1>
      <p class="lead mb-4">Apprenez les meilleures pratiques de développement piloté par les tests avec Java Spring Boot</p>
      <div class="d-flex justify-content-center gap-3">
        <a href="#tdd" class="btn btn-light btn-lg px-4">Commencer l'apprentissage</a>
        <a href="#cas-pratiques" class="btn btn-outline-light btn-lg px-4">Voir les cas pratiques</a>
      </div>
    </div>
  </section>

  <div class="container mb-5">
    <section class="mb-5">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center">
          <h2 class="mb-4">Pourquoi adopter le TDD avec Spring Boot ?</h2>
          <p class="lead">Le Test Driven Development (TDD) transforme votre façon de développer en garantissant un code plus robuste, mieux conçu et facile à maintenir.</p>
          <div class="d-flex justify-content-center mt-4">
            <div class="px-4 text-center">
              <i class="bi bi-check-circle fs-1" style="color: var(--tdd-red);"></i>
              <p class="mt-2 fw-bold">Qualité</p>
            </div>
            <div class="px-4 text-center">
              <i class="bi bi-speedometer2 fs-1" style="color: var(--spring-green);"></i>
              <p class="mt-2 fw-bold">Productivité</p>
            </div>
            <div class="px-4 text-center">
              <i class="bi bi-shield-check fs-1" style="color: var(--test-blue);"></i>
              <p class="mt-2 fw-bold">Fiabilité</p>
            </div>
          </div>
        </div>
      </div>
    </section>
	

	<img src="images/testsniveaux.gif" alt="Logo de l'entreprise" >
	
	<section id="system-testing" class="mb-5">
  <h2 class="text-center mb-4">Meilleures Pratiques pour Tester le Fonctionnement du Système</h2>
  
  <div class="card mb-4">
    <div class="card-header bg-primary text-white">
      <i class="bi bi-check-circle me-2"></i>Introduction
    </div>
    <div class="card-body">
      <p>Le test de fonctionnalité du système est une étape cruciale qui garantit qu'une application :</p>
      <ul>
        <li>Fonctionne comme prévu</li>
        <li>Répond aux exigences utilisateurs</li>
        <li>Est fiable en conditions réelles</li>
      </ul>
      <p>Voici les 6 piliers essentiels d'une stratégie de test complète :</p>
    </div>
  </div>

  <div class="row">
    <!-- Tests Unitaires -->
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-header bg-success text-white">
          <i class="bi bi-puzzle me-2"></i>1. Tests Unitaires
        </div>
        <div class="card-body">
          <h6>Objectif :</h6>
          <p>Vérifier le bon fonctionnement des composants isolés (méthodes, classes).</p>
          
          <h6 class="mt-3">Best Practices :</h6>
          <ul>
            <li>Utiliser JUnit/TestNG + Mockito</li>
            <li>Un test = un comportement</li>
            <li>Nommage clair (should...When...)</li>
            <li>Tests indépendants et rapides</li>
          </ul>
          
          <div class="code-example mt-3">
            <pre><code class="language-java">@Test
void shouldReturnDiscountWhenPremiumCustomer() {
    Customer premium = new Customer(Status.PREMIUM);
    assertEquals(0.15, premium.getDiscount());
}</code></pre>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tests d'Intégration -->
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-header bg-warning text-dark">
          <i class="bi bi-plug me-2"></i>2. Tests d'Intégration
        </div>
        <div class="card-body">
          <h6>Objectif :</h6>
          <p>Vérifier l'interaction entre composants (bases de données, APIs externes).</p>
          
          <h6 class="mt-3">Best Practices :</h6>
          <ul>
            <li>Utiliser @SpringBootTest (Spring)</li>
            <li>TestContainers pour les bases de données</li>
            <li>WireMock pour les APIs externes</li>
            <li>Vérifier les transactions</li>
          </ul>
          
          <div class="code-example mt-3">
            <pre><code class="language-java">@Test
void shouldSaveOrderInDatabase() {
    Order order = new Order(123L, 3);
    orderRepository.save(order);
    
    assertTrue(orderRepository.existsById(123L));
}</code></pre>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tests Système -->
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-header bg-info text-white">
          <i class="bi bi-gear me-2"></i>3. Tests Système
        </div>
        <div class="card-body">
          <h6>Objectif :</h6>
          <p>Valider le système complet selon les spécifications.</p>
          
          <h6 class="mt-3">Best Practices :</h6>
          <ul>
            <li>Scénarios end-to-end</li>
            <li>Données de test réalistes</li>
            <li>Selenium/Cypress pour le front</li>
            <li>Postman/Newman pour les APIs</li>
          </ul>
          
          <div class="code-example mt-3">
            <pre><code class="language-gherkin">Scenario: Checkout complet
  Given Un utilisateur connecté
  When Il ajoute 2 produits au panier
  And Il complète le paiement
  Then La commande est créée
  And Un email de confirmation est envoyé</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <!-- Tests de Charge -->
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-header bg-danger text-white">
          <i class="bi bi-speedometer2 me-2"></i>4. Tests de Charge
        </div>
        <div class="card-body">
          <h6>Objectif :</h6>
          <p>Évaluer les performances sous charge.</p>
          
          <h6 class="mt-3">Best Practices :</h6>
          <ul>
            <li>JMeter/Gatling/k6</li>
            <li>Simuler la montée en charge progressive</li>
            <li>Monitorer : CPU, mémoire, temps de réponse</li>
            <li>Tester en environnement proche de la prod</li>
          </ul>
          
          <div class="code-example mt-3">
            <pre><code class="language-kotlin">// Exemple Gatling
setUp(
    scenario("Checkout Load Test")
        .exec(http("AddToCart").post("/cart"))
        .inject(rampUsers(1000).during(60))
).protocols(http.baseUrl("https://api.myshop.com"))</code></pre>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tests d'Erreur -->
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-header bg-secondary text-white">
          <i class="bi bi-exclamation-octagon me-2"></i>5. Tests d'Erreur
        </div>
        <div class="card-body">
          <h6>Objectif :</h6>
          <p>Vérifier la robustesse face aux erreurs.</p>
          
          <h6 class="mt-3">Best Practices :</h6>
          <ul>
            <li>Chaos Engineering (Chaos Monkey)</li>
            <li>Tester les cas limites</li>
            <li>Simuler pannes réseaux/BDD</li>
            <li>Vérifier les messages d'erreur</li>
          </ul>
          
          <div class="code-example mt-3">
            <pre><code class="language-java">@Test
void shouldThrowExceptionWhenInventoryEmpty() {
    when(inventoryService.checkStock(any())).thenReturn(0);
    
    assertThrows(InventoryException.class, () -> {
        orderService.placeOrder(testOrder);
    });
}</code></pre>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Automatisation -->
    <div class="col-md-4 mb-4">
      <div class="card h-100">
        <div class="card-header bg-dark text-white">
          <i class="bi bi-robot me-2"></i>6. Automatisation
        </div>
        <div class="card-body">
          <h6>Objectif :</h6>
          <p>Rendre les tests reproductibles et efficaces.</p>
          
          <h6 class="mt-3">Best Practices :</h6>
          <ul>
            <li>Intégration continue (Jenkins/GitHub Actions)</li>
            <li>Pipeline de test (unit → intégration → E2E)</li>
            <li>Reporting (Allure Report)</li>
            <li>Parallel execution</li>
          </ul>
          
          <div class="code-example mt-3">
            <pre><code class="language-yaml"># GitHub Actions
- name: Run Tests
  run: |
    mvn test
    npm run e2e
    gatling:test</code></pre>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="card mt-4">
    <div class="card-header bg-info text-white">
      <i class="bi bi-diagram-3 me-2"></i>Stratégie de Test en Couches
    </div>
    <div class="card-body">
      <div class="text-center mb-3">
        <img src="images/test-pyramid.png" alt="Pyramide des tests" class="img-fluid" style="max-height: 200px;">
      </div>
      <div class="row">
        <div class="col-md-4">
          <h6>Tests Unitaires (70%)</h6>
          <ul>
            <li>Rapides (ms)</li>
            <li>Isolés</li>
            <li>Couvrent la logique métier</li>
          </ul>
        </div>
        <div class="col-md-4">
          <h6>Tests Intégration (20%)</h6>
          <ul>
            <li>Modérément rapides (s)</li>
            <li>Vérifient les interactions</li>
            <li>Bases de données, APIs</li>
          </ul>
        </div>
        <div class="col-md-4">
          <h6>Tests E2E (10%)</h6>
          <ul>
            <li>Lents (min)</li>
            <li>Scénarios complets</li>
            <li>UI/Workflows</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>


<section id="tdd" class="mb-5">
  <h2 class="text-center mb-4">Test Driven Development (TDD)</h2>
  
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="card h-100 tdd-card">
        <div class="card-header d-flex align-items-center">
          <i class="bi bi-journal-bookmark me-2"></i>
          <h5 class="mb-0">Introduction au TDD</h5>
        </div>
        <div class="card-body">
          <p>Le Test Driven Development (TDD) est une méthodologie de développement logiciel révolutionnaire qui inverse radicalement le processus traditionnel. Contrairement à l'approche classique où on écrit d'abord le code puis les tests, le TDD impose d'écrire les tests avant même la première ligne de code de production.</p>
          
          <div class="highlight-box">
            <p><strong>Cycle Red-Green-Refactor :</strong> Le cœur battant du TDD</p>
            <ol>
              <li><strong>Red :</strong> Écrire un test unitaire qui décrit une petite fonctionnalité. Ce test doit échouer initialement (d'où "Red") car la fonctionnalité n'existe pas encore. Ceci valide que le test est significatif.</li>
              <li><strong>Green :</strong> Implémenter le code minimal le plus simple possible pour faire passer le test ("Green"). On cherche ici à satisfaire le test sans ajouter de fonctionnalités superflues.</li>
              <li><strong>Refactor :</strong> Une fois le test passé, améliorer la qualité du code tout en maintenant les tests verts. Cela inclut l'élimination des duplications, l'amélioration de la lisibilité et l'optimisation des performances.</li>
            </ol>
            <p>Ce cycle, répété typiquement toutes les 1 à 5 minutes, crée une progression incrémentale et mesurable du développement.</p>
          </div>
          
          <div class="mt-3">
            <h6>Origines et philosophie :</h6>
            <p>Popularisé par Kent Beck dans le cadre de l'eXtreme Programming, le TDD s'appuie sur deux principes clés :</p>
            <ul>
              <li><strong>YAGNI (You Ain't Gonna Need It):</strong> Ne pas implémenter de fonctionnalités avant d'en avoir besoin</li>
              <li><strong>KISS (Keep It Simple, Stupid):</strong> La solution la plus simple qui marche</li>
            </ul>
          </div>
          
          <button class="btn btn-tdd btn-sm mt-3" onclick="showDetails('tdd-intro')">
            <i class="bi bi-info-circle me-1"></i>Avantages approfondis du TDD
          </button>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card h-100 tdd-card">
        <div class="card-header d-flex align-items-center">
          <i class="bi bi-code-square me-2"></i>
          <h5 class="mb-0">Exemples concrets de TDD</h5>
        </div>
        <div class="card-body">
          <p>Prenons l'exemple complet d'une calculatrice implémentée avec TDD :</p>
          
          <div class="code-block">
            <pre>// Premier cycle - Addition simple
// Étape RED
@Test
void shouldReturn4WhenAdding2And2() {
    Calculator calc = new Calculator();
    assertEquals(4, calc.add(2, 2)); // Échec: méthode add() n'existe pas
}

// Étape GREEN
public class Calculator {
    public int add(int a, int b) {
        return 4; // Implémentation minimale pour passer le test
    }
}

// Étape REFACTOR
public class Calculator {
    public int add(int a, int b) {
        return a + b; // Généralisation après plusieurs tests
    }
}

// Deuxième cycle - Gestion des nombres négatifs
@Test
void shouldReturnNegativeWhenAddingNegatives() {
    Calculator calc = new Calculator();
    assertEquals(-5, calc.add(-2, -3));
}

// Troisième cycle - Validation des entrées
@Test
void shouldThrowExceptionWhenOverflow() {
    Calculator calc = new Calculator();
    assertThrows(ArithmeticException.class, () -> 
        calc.add(Integer.MAX_VALUE, 1));
}

// Implémentation finale avec validation
public class Calculator {
    public int add(int a, int b) {
        long result = (long)a + (long)b;
        if (result > Integer.MAX_VALUE || result < Integer.MIN_VALUE) {
            throw new ArithmeticException("Integer overflow");
        }
        return a + b;
    }
}</pre>
          </div>
          
          <div class="mt-3">
            <h6>Autre exemple : Validation d'email</h6>
            <pre>// Premier test - Format basique
@Test
void shouldValidateSimpleEmail() {
    assertTrue(EmailValidator.isValid("test@example.com"));
}

// Implémentation progressive
public class EmailValidator {
    public static boolean isValid(String email) {
        return email.matches("^[^@]+@[^@]+\\.[^@]+$");
    }
}

// Tests supplémentaires pour raffiner
@Test
void shouldRejectInvalidEmails() {
    assertFalse(EmailValidator.isValid("invalid"));
    assertFalse(EmailValidator.isValid("invalid@"));
    assertFalse(EmailValidator.isValid("@domain.com"));
}</pre>
          </div>
          
          <button class="btn btn-tdd btn-sm mt-2" onclick="showDetails('tdd-example')">
            <i class="bi bi-info-circle me-1"></i>Cas d'entreprise réels
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-4">
      <div class="card h-100 tdd-card">
        <div class="card-header d-flex align-items-center">
          <i class="bi bi-lightbulb me-2"></i>
          <h5 class="mb-0">Avantages stratégiques du TDD</h5>
        </div>
        <div class="card-body">
          <ul>
            <li><strong>Couverture de test élevée :</strong> 90-100% contre 20-30% en approche traditionnelle. Chaque ligne de code est écrite pour répondre à un test spécifique.</li>
            <li><strong>Design émergent :</strong> Le code évolue naturellement vers une architecture modulaire et faiblement couplée pour faciliter les tests.</li>
            <li><strong>Documentation vivante :</strong> Les tests servent de spécifications exécutables, toujours à jour contrairement aux documents statiques.</li>
            <li><strong>Réduction des bugs :</strong> 40-80% moins de bugs en production selon diverses études (IBM, Microsoft).</li>
            <li><strong>Refactoring sécurisé :</strong> La suite de tests permet de modifier le code en confiance, essentiel pour l'évolution à long terme.</li>
            <li><strong>Focus maintenu :</strong> Travailler par petits incréments évite le "gold plating" et les features creep.</li>
            <li><strong>Meilleure conception :</strong> L'écriture des tests en premier force à penser l'API avant l'implémentation.</li>
          </ul>
          
          <div class="case-study mt-3">
            <h6>Étude de cas : projet NASA</h6>
            <p>La mission Space Shuttle a utilisé une approche similaire au TDD, résultant en seulement 17 bugs critiques sur 420 000 lignes de code (0.004%).</p>
          </div>
          
          <button class="btn btn-tdd btn-sm mt-2" onclick="showDetails('tdd-benefits')">
            <i class="bi bi-info-circle me-1"></i>Données scientifiques
          </button>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card h-100 tdd-card">
        <div class="card-header d-flex align-items-center">
          <i class="bi bi-exclamation-triangle me-2"></i>
          <h5 class="mb-0">Challenges et solutions</h5>
        </div>
        <div class="card-body">
          <ul>
            <li><strong>Courbe d'apprentissage :</strong> 3-6 mois pour devenir productif. Solution : Pair programming avec un expert TDD.</li>
            <li><strong>Adaptation mentale :</strong> Difficile pour les développeurs expérimentés. Solution : Ateliers pratiques avec katas.</li>
            <li><strong>Temps initial plus long :</strong> 15-30% plus long au début. Solution : Le temps est rattrapé lors de la maintenance.</li>
            <li><strong>Tests mal conçus :</strong> Tests fragiles ou trop larges. Solution : Former aux principes FIRST (Fast, Isolated, Repeatable, Self-Validating, Timely).</li>
            <li><strong>Sur-mock :</strong> Isolation excessive menant à des tests non réalistes. Solution : Utiliser des tests d'intégration judicieusement.</li>
            <li><strong>Tests lents :</strong> Suite de tests trop lente pour être exécutée fréquemment. Solution : Stratégie de test pyramidale (70% unitaires, 20% intégration, 10% E2E).</li>
            <li><strong>Résistance organisationnelle :</strong> Management focalisé sur la vélocité à court terme. Solution : Mesurer la qualité et les coûts de maintenance.</li>
          </ul>
          
          <div class="pro-tip mt-3">
            <h6>Astuce professionnelle :</h6>
            <p>Commencez par appliquer le TDD aux nouveaux composants plutôt qu'au code legacy. Utilisez le "Scout Rule" (laisser le code mieux que vous ne l'avez trouvé) pour améliorer progressivement le code existant.</p>
          </div>
          
          <button class="btn btn-tdd btn-sm mt-2" onclick="showDetails('tdd-challenges')">
            <i class="bi bi-info-circle me-1"></i>Stratégies d'adoption
          </button>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card h-100 tdd-card">
        <div class="card-header d-flex align-items-center">
          <i class="bi bi-puzzle me-2"></i>
          <h5 class="mb-0">Bonnes pratiques avancées</h5>
        </div>
        <div class="card-body">
          <ul>
            <li><strong>Tests rapides :</strong> Moins d'1ms par test. Éviter les I/O, utiliser des mocks pour les dépendances lentes.</li>
            <li><strong>Tests isolés :</strong> Un test = une assertion. Éviter les tests qui dépendent de l'état précédent.</li>
            <li><strong>Nommage clair :</strong> Utiliser la convention "should[ExpectedBehavior]When[StateUnderTest]" (ex: "shouldThrowExceptionWhenDivisorIsZero").</li>
            <li><strong>Éviter les détails d'implémentation :</strong> Tester le comportement (what) pas l'implémentation (how).</li>
            <li><strong>Refactor constant :</strong> Appliquer le "Boy Scout Rule" - toujours laisser le code plus propre.</li>
            <li><strong>Test List :</strong> Lister les tests à écrire avant de commencer (technique de Kent Beck).</li>
            <li><strong>Fake it till you make it :</strong> Commencer par des valeurs codées en dur puis généraliser.</li>
            <li><strong>Triangulation :</strong> Généraliser seulement quand on a plusieurs exemples concrets.</li>
          </ul>
          
          <div class="advanced-topic mt-3">
            <h6>Technique avancée : Property-Based Testing</h6>
            <p>Au-delà des exemples, tester des propriétés mathématiques (ex: ∀ a,b ∈ ℤ, a + b = b + a) avec des librairies comme QuickCheck.</p>
            <pre>@Test
void additionIsCommutative() {
    forAll(integers(), integers(), (a, b) -> 
        calc.add(a, b) == calc.add(b, a));
}</pre>
          </div>
          
          <button class="btn btn-tdd btn-sm mt-2" onclick="showDetails('tdd-best-practices')">
            <i class="bi bi-info-circle me-1"></i>Outils recommandés
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row mt-4">
    <div class="col-md-12">
      <div class="card tdd-card">
        <div class="card-header d-flex align-items-center">
          <i class="bi bi-graph-up me-2"></i>
          <h5 class="mb-0">Métriques et ROI du TDD</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <h6>Impact sur la qualité :</h6>
              <ul>
                <li>Réduction de 40-90% des bugs en production (étude Microsoft)</li>
                <li>Temps de debug réduit de 50-75%</li>
                <li>Couverture de code typique de 90-100% vs 20-40%</li>
              </ul>
              
              <h6 class="mt-3">Coûts et économies :</h6>
              <table class="table table-sm">
                <tr><th>Phase</th><th>Coût sans TDD</th><th>Coût avec TDD</th></tr>
                <tr><td>Développement</td><td>100%</td><td>115-130%</td></tr>
                <tr><td>Tests QA</td><td>100%</td><td>30-50%</td></tr>
                <tr><td>Maintenance</td><td>100%</td><td>20-40%</td></tr>
              </table>
            </div>
            <div class="col-md-6">
              <h6>Courbe d'adoption typique :</h6>
              <img src="/images/tdd-adoption-curve.png" alt="Courbe d'adoption TDD" class="img-fluid mb-3">
              <p>Les équipes expérimentées en TDD peuvent atteindre une productivité égale ou supérieure après 6-12 mois.</p>
              
              <h6 class="mt-3">Facteurs clés de succès :</h6>
              <ol>
                <li>Engagement de la direction</li>
                <li>Formation continue</li>
                <li>Revues de code focalisées sur les tests</li>
                <li>Outillage adapté (CI, couverture de code)</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="junit-mockito" class="mb-5">
  <h2 class="text-center mb-4">JUnit 5 & Mockito - Test Driven Development</h2>
  
  <div class="card mb-4">
    <div class="card-header bg-dark text-white">
      <i class="bi bi-gear me-2"></i>Cas pratique complet : Système de gestion de bibliothèque
    </div>
    <div class="card-body">
      <h5 class="mb-3">Scénario : Emprunt d'un livre avec vérifications complexes</h5>
      
      <div class="row">
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-header bg-light">
              <i class="bi bi-check-circle me-2"></i>Spécifications
            </div>
            <div class="card-body">
              <ul>
                <li>Un membre peut emprunter un livre disponible</li>
                <li>Un membre ne peut pas emprunter s'il a des amendes non payées</li>
                <li>Un membre ne peut pas emprunter s'il a déjà 5 livres</li>
                <li>Les livres de référence ne peuvent pas être empruntés</li>
                <li>L'emprunt doit être enregistré dans le système</li>
                <li>Le livre doit être marqué comme "emprunté"</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card mb-3">
            <div class="card-header bg-light">
              <i class="bi bi-layers me-2"></i>Architecture
            </div>
            <div class="card-body">
              <ul>
                <li><strong>LoanService</strong> - Cœur de la logique métier</li>
                <li><strong>BookRepository</strong> - Accès aux données des livres</li>
                <li><strong>MemberRepository</strong> - Gestion des membres</li>
                <li><strong>LoanRepository</strong> - Historique des emprunts</li>
                <li><strong>FineService</strong> - Vérification des amendes</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <hr>
      
      <h4 class="mt-4 mb-3">Implémentation TDD avec JUnit 5 et Mockito</h4>
      
      <!-- Test 1 : Emprunt réussi -->
      <div class="card mb-4">
        <div class="card-header test-success">
          <i class="bi bi-check-square me-2"></i>Test 1 - Emprunt réussi (Happy Path)
        </div>
        <div class="card-body">
          <pre><code class="language-java">@ExtendWith(MockitoExtension.class)
class LoanServiceTest {

    @Mock
    private BookRepository bookRepository;
    
    @Mock
    private MemberRepository memberRepository;
    
    @Mock
    private LoanRepository loanRepository;
    
    @Mock
    private FineService fineService;
    
    @InjectMocks
    private LoanService loanService;

    @Test
    @DisplayName("Given un livre disponible et un membre éligible When emprunt Then succès")
    void borrowBook_success() {
        // Given
        String isbn = "123-4567890";
        Long memberId = 1L;
        
        Book mockBook = new Book(isbn, "Effective Java", "Joshua Bloch", BookType.LOANABLE);
        Member mockMember = new Member(memberId, "Dupont", "Jean", 2);
        
        when(bookRepository.findByIsbn(isbn)).thenReturn(Optional.of(mockBook));
        when(memberRepository.findById(memberId)).thenReturn(Optional.of(mockMember));
        when(fineService.hasOutstandingFines(memberId)).thenReturn(false);
        when(loanRepository.countActiveLoans(memberId)).thenReturn(2);
        
        // When
        LoanResult result = loanService.borrowBook(isbn, memberId);
        
        // Then
        assertThat(result.isSuccess()).isTrue();
        assertThat(result.getLoan()).isNotNull();
        
        verify(bookRepository).markAsBorrowed(isbn);
        verify(loanRepository).save(any(Loan.class));
    }
}</code></pre>
        </div>
      </div>
      
      <!-- Test 2 : Livre non disponible -->
      <div class="card mb-4">
        <div class="card-header test-failure">
          <i class="bi bi-exclamation-triangle me-2"></i>Test 2 - Livre non disponible
        </div>
        <div class="card-body">
          <pre><code class="language-java">@Test
@DisplayName("Given un livre non disponible When emprunt Then échec")
void borrowBook_bookNotAvailable_shouldFail() {
    // Given
    String isbn = "123-4567890";
    Long memberId = 1L;
    
    when(bookRepository.findByIsbn(isbn)).thenReturn(Optional.empty());
    
    // When
    LoanResult result = loanService.borrowBook(isbn, memberId);
    
    // Then
    assertThat(result.isSuccess()).isFalse();
    assertThat(result.getError()).isEqualTo("Livre non trouvé");
    
    verify(bookRepository, never()).markAsBorrowed(anyString());
    verify(loanRepository, never()).save(any());
}</code></pre>
        </div>
      </div>
      
      <!-- Test 3 : Membre avec amendes -->
      <div class="card mb-4">
        <div class="card-header test-failure">
          <i class="bi bi-exclamation-triangle me-2"></i>Test 3 - Membre avec amendes impayées
        </div>
        <div class="card-body">
          <pre><code class="language-java">@Test
@DisplayName("Given un membre avec amendes When emprunt Then échec")
void borrowBook_memberWithFines_shouldFail() {
    // Given
    String isbn = "123-4567890";
    Long memberId = 1L;
    
    Book mockBook = new Book(isbn, "Effective Java", "Joshua Bloch", BookType.LOANABLE);
    Member mockMember = new Member(memberId, "Dupont", "Jean", 2);
    
    when(bookRepository.findByIsbn(isbn)).thenReturn(Optional.of(mockBook));
    when(memberRepository.findById(memberId)).thenReturn(Optional.of(mockMember));
    when(fineService.hasOutstandingFines(memberId)).thenReturn(true);
    
    // When
    LoanResult result = loanService.borrowBook(isbn, memberId);
    
    // Then
    assertThat(result.isSuccess()).isFalse();
    assertThat(result.getError()).isEqualTo("Amendes impayées");
    
    verify(bookRepository, never()).markAsBorrowed(anyString());
    verify(loanRepository, never()).save(any());
}</code></pre>
        </div>
      </div>
      
      <!-- Test 4 : Livre de référence -->
      <div class="card mb-4">
        <div class="card-header test-failure">
          <i class="bi bi-exclamation-triangle me-2"></i>Test 4 - Livre de référence non empruntable
        </div>
        <div class="card-body">
          <pre><code class="language-java">@Test
@DisplayName("Given un livre de référence When emprunt Then échec")
void borrowBook_referenceBook_shouldFail() {
    // Given
    String isbn = "REF-123456";
    Long memberId = 1L;
    
    Book mockBook = new Book(isbn, "Oxford Dictionary", "Various", BookType.REFERENCE);
    Member mockMember = new Member(memberId, "Dupont", "Jean", 2);
    
    when(bookRepository.findByIsbn(isbn)).thenReturn(Optional.of(mockBook));
    when(memberRepository.findById(memberId)).thenReturn(Optional.of(mockMember));
    when(fineService.hasOutstandingFines(memberId)).thenReturn(false);
    
    // When
    LoanResult result = loanService.borrowBook(isbn, memberId);
    
    // Then
    assertThat(result.isSuccess()).isFalse();
    assertThat(result.getError()).isEqualTo("Les livres de référence ne peuvent être empruntés");
    
    verify(bookRepository, never()).markAsBorrowed(anyString());
    verify(loanRepository, never()).save(any());
}</code></pre>
        </div>
      </div>
      
      <!-- Implémentation finale -->
      <div class="card mt-4">
        <div class="card-header bg-primary text-white">
          <i class="bi bi-code-slash me-2"></i>Implémentation finale du LoanService
        </div>
        <div class="card-body">
          <pre><code class="language-java">public class LoanService {

    private final BookRepository bookRepository;
    private final MemberRepository memberRepository;
    private final LoanRepository loanRepository;
    private final FineService fineService;
    
    public LoanService(BookRepository bookRepository, 
                      MemberRepository memberRepository,
                      LoanRepository loanRepository,
                      FineService fineService) {
        this.bookRepository = bookRepository;
        this.memberRepository = memberRepository;
        this.loanRepository = loanRepository;
        this.fineService = fineService;
    }
    
    public LoanResult borrowBook(String isbn, Long memberId) {
        // Vérification du livre
        Optional&lt;Book&gt; optionalBook = bookRepository.findByIsbn(isbn);
        if (optionalBook.isEmpty()) {
            return LoanResult.error("Livre non trouvé");
        }
        
        Book book = optionalBook.get();
        if (book.getType() == BookType.REFERENCE) {
            return LoanResult.error("Les livres de référence ne peuvent être empruntés");
        }
        
        // Vérification du membre
        Optional&lt;Member&gt; optionalMember = memberRepository.findById(memberId);
        if (optionalMember.isEmpty()) {
            return LoanResult.error("Membre non trouvé");
        }
        
        Member member = optionalMember.get();
        
        // Vérification des amendes
        if (fineService.hasOutstandingFines(memberId)) {
            return LoanResult.error("Amendes impayées");
        }
        
        // Vérification du nombre d'emprunts
        int activeLoans = loanRepository.countActiveLoans(memberId);
        if (activeLoans >= 5) {
            return LoanResult.error("Quota d'emprunts atteint");
        }
        
        // Création de l'emprunt
        Loan loan = new Loan(book, member, LocalDate.now(), 
                           LocalDate.now().plusWeeks(2));
        
        // Persistance
        bookRepository.markAsBorrowed(isbn);
        Loan savedLoan = loanRepository.save(loan);
        
        return LoanResult.success(savedLoan);
    }
}</code></pre>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Bonnes pratiques -->
  <div class="row mt-4">
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-info text-white">
          <i class="bi bi-check-circle me-2"></i>Bonnes pratiques JUnit 5
        </div>
        <div class="card-body">
          <ul>
            <li><strong>@DisplayName :</strong> Utilisez des noms descriptifs pour les tests</li>
            <li><strong>Assertions :</strong> Préférez AssertJ ou JUnit 5 assertions pour plus de lisibilité</li>
            <li><strong>@Nested :</strong> Structurez les tests complexes avec des classes imbriquées</li>
            <li><strong>@ParameterizedTest :</strong> Pour tester plusieurs jeux de données</li>
            <li><strong>@BeforeEach/@AfterEach :</strong> Initialisation/nettoyage avant/après chaque test</li>
            <li><strong>AssertAll :</strong> Groupez les assertions pour voir toutes les erreurs</li>
          </ul>
          
          <h6 class="mt-3">Exemple de test paramétré :</h6>
          <pre><code class="language-java">@ParameterizedTest
@CsvSource({
    "123-4567890, true",
    "INVALID-ISBN, false",
    "REF-123456, false"
})
void shouldValidateBookForLoan(String isbn, boolean expected) {
    boolean isValid = loanService.isBookAvailableForLoan(isbn);
    assertEquals(expected, isValid);
}</code></pre>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-info text-white">
          <i class="bi bi-magic me-2"></i>Bonnes pratiques Mockito
        </div>
        <div class="card-body">
          <ul>
            <li><strong>@Mock vs @InjectMocks :</strong> Séparation claire des dépendances</li>
            <li><strong>verify :</strong> Vérifiez les interactions avec les mocks</li>
            <li><strong>ArgumentMatchers :</strong> any(), eq(), etc. pour une plus grande flexibilité</li>
            <li><strong>BDDMockito :</strong> Given/When/Then pour une meilleure lisibilité</li>
            <li><strong>@Spy :</strong> Pour mock partiel quand nécessaire</li>
            <li><strong>MockitoExtension :</strong> Préférez cette extension à MockitoJUnitRunner</li>
          </ul>
          
          <h6 class="mt-3">Exemple BDD style :</h6>
          <pre><code class="language-java">@Test
void borrowBook_bddStyle() {
    // Given
    Book book = new Book("123", "Clean Code", "Robert Martin", BookType.LOANABLE);
    given(bookRepository.findByIsbn("123")).willReturn(Optional.of(book));
    given(fineService.hasOutstandingFines(any())).willReturn(false);
    
    // When
    LoanResult result = loanService.borrowBook("123", 1L);
    
    // Then
    then(bookRepository).should().markAsBorrowed("123");
    then(loanRepository).should().save(any(Loan.class));
    assertThat(result.isSuccess()).isTrue();
}</code></pre>
        </div>
      </div>
    </div>
  </div>
</section>

    <section id="spring-boot" class="mb-5">
      <h2 class="text-center mb-4">Spring Boot & Tests</h2>
      
      <div class="row mb-4">
        <div class="col-md-6">
          <div class="card h-100 spring-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-journal-bookmark me-2"></i>
              <h5 class="mb-0">Spring Boot Testing</h5>
            </div>
            <div class="card-body">
              <p>Spring Boot offre un excellent support pour les tests avec :</p>
              <div class="spring-highlight highlight-box">
                <ul>
                  <li><strong>@SpringBootTest :</strong> Test d'intégration complet</li>
                  <li><strong>@WebMvcTest :</strong> Test des contrôleurs MVC</li>
                  <li><strong>@DataJpaTest :</strong> Test des repositories JPA</li>
                  <li><strong>@MockBean :</strong> Mock de composants Spring</li>
                  <li><strong>TestRestTemplate :</strong> Test des API REST</li>
                </ul>
              </div>
              <button class="btn btn-spring btn-sm mt-3" onclick="showDetails('spring-testing')">
                <i class="bi bi-info-circle me-1"></i>Exemples concrets
              </button>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="card h-100 spring-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-diagram-3 me-2"></i>
              <h5 class="mb-0">Architecture testable</h5>
            </div>
            <div class="card-body">
              <p>Concevez votre application Spring Boot pour être facilement testable :</p>
              <ul>
                <li>Couches séparées (Controller, Service, Repository)</li>
                <li>Injection de dépendances</li>
                <li>Interfaces pour les dépendances externes</li>
                <li>Configuration externalisée</li>
                <li>Profils Spring pour différents environnements</li>
              </ul>
              <div class="code-block mt-3">
                <pre>@Service
public class UserService {
    private final UserRepository repo;
    
    @Autowired
    public UserService(UserRepository repo) {
        this.repo = repo;
    }
    
    public User findById(Long id) {
        return repo.findById(id).orElseThrow(...);
    }
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-4">
          <div class="card h-100 spring-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-controller me-2"></i>
              <h5 class="mb-0">Test des contrôleurs</h5>
            </div>
            <div class="card-body">
              <p>Testez vos contrôleurs REST avec MockMvc :</p>
              <div class="code-block">
                <pre>@WebMvcTest(UserController.class)
class UserControllerTest {
    @Autowired MockMvc mvc;
    @MockBean UserService service;
    
    @Test
    void shouldReturnUser() throws Exception {
        when(service.findById(1L))
          .thenReturn(new User(1L, "test"));
        
        mvc.perform(get("/users/1"))
          .andExpect(status().isOk())
          .andExpect(jsonPath("$.name").value("test"));
    }
}</pre>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-md-4">
          <div class="card h-100 spring-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-database me-2"></i>
              <h5 class="mb-0">Test des repositories</h5>
            </div>
            <div class="card-body">
              <p>Testez vos repositories JPA avec @DataJpaTest :</p>
              <div class="code-block">
                <pre>@DataJpaTest
class UserRepositoryTest {
    @Autowired TestEntityManager em;
    @Autowired UserRepository repo;
    
    @Test
    void shouldFindByEmail() {
        em.persist(new User("test@example.com"));
        
        User found = repo.findByEmail("test@example.com");
        assertNotNull(found);
    }
}</pre>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-md-4">
          <div class="card h-100 spring-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-shield-lock me-2"></i>
              <h5 class="mb-0">Test de sécurité</h5>
            </div>
            <div class="card-body">
              <p>Testez Spring Security avec @WithMockUser :</p>
              <div class="code-block">
                <pre>@Test
@WithMockUser(roles="ADMIN")
void shouldAllowAdminAccess() throws Exception {
    mvc.perform(get("/admin"))
      .andExpect(status().isOk());
}

@Test
@WithMockUser(roles="USER")
void shouldDenyUserAccessToAdmin() throws Exception {
    mvc.perform(get("/admin"))
      .andExpect(status().isForbidden());
}</pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="tests" class="mb-5">
      <h2 class="text-center mb-4">Types de tests</h2>
      
      <div class="row mb-4">
        <div class="col-md-6">
          <div class="card h-100 test-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-journal-bookmark me-2"></i>
              <h5 class="mb-0">Tests unitaires</h5>
            </div>
            <div class="card-body">
              <p>Les tests unitaires vérifient de petites unités de code en isolation :</p>
              <div class="test-highlight highlight-box">
                <p><strong>Outils :</strong></p>
                <ul>
                  <li>JUnit 5</li>
                  <li>Mockito</li>
                  <li>AssertJ</li>
                  <li>Hamcrest</li>
                </ul>
              </div>
              <div class="code-block mt-3">
                <pre>@ExtendWith(MockitoExtension.class)
class UserServiceTest {
    @Mock UserRepository repo;
    @InjectMocks UserService service;
    
    @Test
    void shouldReturnUser() {
        when(repo.findById(1L))
          .thenReturn(Optional.of(new User(1L, "test")));
        
        User found = service.getUser(1L);
        assertEquals("test", found.getName());
    }
}</pre>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="card h-100 test-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-arrow-repeat me-2"></i>
              <h5 class="mb-0">Tests d'intégration</h5>
            </div>
            <div class="card-body">
              <p>Les tests d'intégration vérifient le fonctionnement combiné de plusieurs composants :</p>
              <div class="code-block">
                <pre>@SpringBootTest
@AutoConfigureMockMvc
class UserIntegrationTest {
    @Autowired MockMvc mvc;
    @Autowired UserRepository repo;
    
    @Test
    @Transactional
    void shouldCreateAndRetrieveUser() throws Exception {
        mvc.perform(post("/users")
          .content("{\"name\":\"test\"}")
          .contentType(APPLICATION_JSON))
          .andExpect(status().isCreated());
        
        User saved = repo.findByName("test");
        assertNotNull(saved);
    }
}</pre>
              </div>
              <button class="btn btn-test btn-sm mt-2" onclick="showDetails('integration-tests')">
                <i class="bi bi-info-circle me-1"></i>TestContainers
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-4">
          <div class="card h-100 test-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-file-earmark-text me-2"></i>
              <h5 class="mb-0">Tests BDD</h5>
            </div>
            <div class="card-body">
              <p>Behavior Driven Development avec Cucumber :</p>
              <div class="code-block">
                <pre>Feature: User management
  Scenario: Create user
    Given I am on the user creation page
    When I enter "testuser" as name
    And I submit the form
    Then I should see "testuser" in the user list</pre>
              </div>
              <button class="btn btn-test btn-sm mt-2" onclick="showDetails('bdd-tests')">
                <i class="bi bi-info-circle me-1"></i>Implémentation
              </button>
            </div>
          </div>
        </div>
        
        <div class="col-md-4">
          <div class="card h-100 test-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-browser-chrome me-2"></i>
              <h5 class="mb-0">Tests UI</h5>
            </div>
            <div class="card-body">
              <p>Tests d'interface utilisateur avec Selenium :</p>
              <div class="code-block">
                <pre>@Test
void shouldAddUserViaUI() {
    driver.get("http://localhost:8080/users/new");
    driver.findElement(By.name("name"))
      .sendKeys("testuser");
    driver.findElement(By.tagName("button"))
      .click();
    
    assertTrue(driver.getPageSource()
      .contains("testuser"));
}</pre>
              </div>
              <button class="btn btn-test btn-sm mt-2" onclick="showDetails('ui-tests')">
                <i class="bi bi-info-circle me-1"></i>Page Object Model
              </button>
            </div>
          </div>
        </div>
        
        <div class="col-md-4">
          <div class="card h-100 test-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-speedometer2 me-2"></i>
              <h5 class="mb-0">Tests de performance</h5>
            </div>
            <div class="card-body">
              <p>Tests de charge et performance avec JMH :</p>
              <div class="code-block">
                <pre>@Benchmark
@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
public void testUserCreation() {
    userService.createUser(
      new User("test_" + System.currentTimeMillis()));
}</pre>
              </div>
              <button class="btn btn-test btn-sm mt-2" onclick="showDetails('performance-tests')">
                <i class="bi bi-info-circle me-1"></i>Configuration
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

<section id="bonnes-pratiques" class="mb-5">
  <h2 class="text-center mb-4">70 Bonnes Pratiques de Tests Spring Boot</h2>
  
  <div class="row mb-4">
    <div class="col-md-12">
      <ul class="nav nav-tabs justify-content-center" id="practicesTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="unit-tab" data-bs-toggle="tab" data-bs-target="#unit" type="button" role="tab">Tests Unitaires</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="integration-tab" data-bs-toggle="tab" data-bs-target="#integration" type="button" role="tab">Tests Intégration</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="api-tab" data-bs-toggle="tab" data-bs-target="#api" type="button" role="tab">API REST</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab">Sécurité</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="ci-tab" data-bs-toggle="tab" data-bs-target="#ci" type="button" role="tab">CI/CD</button>
        </li>
      </ul>
      
      <div class="tab-content mt-4" id="practicesTabContent">
        <!-- Tests Unitaires -->
        <div class="tab-pane fade show active" id="unit" role="tabpanel">
          <div class="card">
            <div class="card-header tdd-card">
              <h4><i class="bi bi-check-circle me-2"></i>15 Bonnes Pratiques - Tests Unitaires</h4>
            </div>
            <div class="card-body">
              <ol class="practice-list">
                <li>
                  <strong>Un seul comportement par test</strong>
                  <p>Chaque méthode de test doit vérifier un seul comportement du système</p>
                </li>
                <li>
                  <strong>Nommage clair des tests</strong>
                  <p>Utilisez la convention <code>should[ExpectedResult]When[State]</code></p>
                </li>
                <li>
                  <strong>Utilisez @Mock et @InjectMocks</strong>
                  <p>Pour isoler les dépendances et cibler la classe testée</p>
                </li>
                <li>
                  <strong>Testez les cas limites</strong>
                  <p>Valeurs nulles, vides, extrêmes et invalides</p>
                </li>
                <li>
                  <strong>Évitez les appels externes</strong>
                  <p>Pas de base de données, fichiers ou réseau dans les tests unitaires</p>
                </li>
                <li>
                  <strong>Utilisez assertThrows</strong>
                  <p>Pour tester les exceptions attendues</p>
                </li>
                <li>
                  <strong>Vérifiez les interactions</strong>
                  <p>Avec <code>verify()</code> et <code>ArgumentCaptor</code></p>
                </li>
                <li>
                  <strong>Évitez les tests trop mockés</strong>
                  <p>Ne pas sur-spécifier les comportements des mocks</p>
                </li>
                <li>
                  <strong>Utilisez @BeforeEach</strong>
                  <p>Pour initialiser les objets communs à plusieurs tests</p>
                </li>
                <li>
                  <strong>Tests paramétrés</strong>
                  <p>Avec <code>@ParameterizedTest</code> pour éviter la duplication</p>
                </li>
                <li>
                  <strong>Suivez le modèle AAA</strong>
                  <p>Arrange (préparation), Act (exécution), Assert (vérification)</p>
                </li>
                <li>
                  <strong>Tests rapides</strong>
                  <p>Un test unitaire doit s'exécuter en moins de 100ms</p>
                </li>
                <li>
                  <strong>Évitez la logique dans les tests</strong>
                  <p>Pas de boucles ou conditions complexes dans les tests</p>
                </li>
                <li>
                  <strong>Utilisez des builders de test</strong>
                  <p>Pour créer facilement des objets de test complexes</p>
                </li>
                <li>
                  <strong>Commentaires pour les cas complexes</strong>
                  <p>Expliquez le contexte des tests métier critiques</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        
        <!-- Tests Intégration -->
        <div class="tab-pane fade" id="integration" role="tabpanel">
          <div class="card">
            <div class="card-header spring-card">
              <h4><i class="bi bi-arrow-repeat me-2"></i>15 Bonnes Pratiques - Tests Intégration</h4>
            </div>
            <div class="card-body">
              <ol class="practice-list" start="16">
                <li>
                  <strong>Utilisez @SpringBootTest</strong>
                  <p>Avec un profil de test dédié pour charger le contexte</p>
                </li>
                <li>
                  <strong>TestContainers pour les bases</strong>
                  <p>PostgreSQL, MySQL, MongoDB avec des containers Docker</p>
                </li>
                <li>
                  <strong>@DataJpaTest pour les repositories</strong>
                  <p>Testez la couche JPA avec une base configurée</p>
                </li>
                <li>
                  <strong>@Transactional pour le rollback</strong>
                  <p>Annule automatiquement les changements après chaque test</p>
                </li>
                <li>
                  <strong>Base de données isolée</strong>
                  <p>Une base par build ou utilisation de schémas temporaires</p>
                </li>
                <li>
                  <strong>Testez des scénarios réels</strong>
                  <p>Insertions, recherches, mises à jour, suppressions</p>
                </li>
                <li>
                  <strong>Vérifiez les requêtes SQL</strong>
                  <p>Testez les requêtes custom JPQL/Native</p>
                </li>
                <li>
                  <strong>MockMvc pour les contrôleurs</strong>
                  <p>Testez les endpoints sans démarrer le serveur</p>
                </li>
                <li>
                  <strong>Simulez les données</strong>
                  <p>Java Faker ou builders pour générer des données réalistes</p>
                </li>
                <li>
                  <strong>@DirtiesContext</strong>
                  <p>Quand vous modifiez le contexte Spring entre les tests</p>
                </li>
                <li>
                  <strong>Testez les transactions</strong>
                  <p>Vérifiez le comportement en cas de rollback</p>
                </li>
                <li>
                  <strong>Vérifiez les logs</strong>
                  <p>Activez la journalisation pour le débogage</p>
                </li>
                <li>
                  <strong>Tests indépendants</strong>
                  <p>Un test ne doit pas dépendre de l'exécution d'un autre</p>
                </li>
                <li>
                  <strong>Évitez les mocks inutiles</strong>
                  <p>Dans les tests d'intégration, utilisez les vrais composants</p>
                </li>
                <li>
                  <strong>Testez les migrations</strong>
                  <p>Flyway/Liquibase avec des schémas propres</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        
        <!-- API REST -->
        <div class="tab-pane fade" id="api" role="tabpanel">
          <div class="card">
            <div class="card-header test-card">
              <h4><i class="bi bi-file-earmark-text me-2"></i>15 Bonnes Pratiques - API REST</h4>
            </div>
            <div class="card-body">
              <ol class="practice-list" start="31">
                <li>
                  <strong>Testez tous les status HTTP</strong>
                  <p>200, 201, 204, 400, 401, 403, 404, 500</p>
                </li>
                <li>
                  <strong>Vérifiez les headers</strong>
                  <p>Content-Type, Location, Cache-Control, etc.</p>
                </li>
                <li>
                  <strong>Testez les erreurs</strong>
                  <p>Avec <code>@ExceptionHandler</code> personnalisés</p>
                </li>
                <li>
                  <strong>Cas limites</strong>
                  <p>ID inexistant, données invalides, conflits</p>
                </li>
                <li>
                  <strong>Validez le JSON</strong>
                  <p>Avec <code>jsonPath</code> ou <code>Jackson</code></p>
                </li>
                <li>
                  <strong>MockMvc ou TestRestTemplate</strong>
                  <p>Pour simuler les appels API</p>
                </li>
                <li>
                  <strong>Validation de schéma</strong>
                  <p>OpenAPI/Swagger pour vérifier les contrats</p>
                </li>
                <li>
                  <strong>Documentez l'API</strong>
                  <p>SpringDoc OpenAPI + Swagger UI</p>
                </li>
                <li>
                  <strong>Versioning d'API</strong>
                  <p>Testez la compatibilité descendante</p>
                </li>
                <li>
                  <strong>Messages d'erreur</strong>
                  <p>Ne pas exposer les messages internes en clair</p>
                </li>
                <li>
                  <strong>Conventions REST</strong>
                  <p>Verbes HTTP, pluralisation, nesting</p>
                </li>
                <li>
                  <strong>Pagination</strong>
                  <p>Testez les paramètres page, size, sort</p>
                </li>
                <li>
                  <strong>Quotas et limites</strong>
                  <p>Testez les restrictions de taux</p>
                </li>
                <li>
                  <strong>Endpoints protégés</strong>
                  <p>Avec et sans token JWT</p>
                </li>
                <li>
                  <strong>Tests contractuels</strong>
                  <p>Spring Cloud Contract pour les consommateurs</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        
        <!-- Sécurité -->
        <div class="tab-pane fade" id="security" role="tabpanel">
          <div class="card">
            <div class="card-header tdd-card">
              <h4><i class="bi bi-shield-lock me-2"></i>15 Bonnes Pratiques - Sécurité</h4>
            </div>
            <div class="card-body">
              <ol class="practice-list" start="46">
                <li>
                  <strong>@WithMockUser</strong>
                  <p>Pour simuler des utilisateurs authentifiés</p>
                </li>
                <li>
                  <strong>Testez les accès refusés</strong>
                  <p>401 (non authentifié) et 403 (non autorisé)</p>
                </li>
                <li>
                  <strong>Différents rôles</strong>
                  <p>Testez avec ADMIN, USER, GUEST, etc.</p>
                </li>
                <li>
                  <strong>Routes publiques</strong>
                  <p>Vérifiez les endpoints accessibles sans authentification</p>
                </li>
                <li>
                  <strong>Configuration CSRF</strong>
                  <p>Testez sa désactivation ou son fonctionnement</p>
                </li>
                <li>
                  <strong>JWT/OAuth2</strong>
                  <p>Testez le flux complet d'authentification</p>
                </li>
                <li>
                  <strong>Restrictions de champ</strong>
                  <p>Un utilisateur ne peut pas modifier les données d'un autre</p>
                </li>
                <li>
                  <strong>Tests d'échec</strong>
                  <p>Tokens invalides, expirés, revokés</p>
                </li>
                <li>
                  <strong>Journalisation des accès</strong>
                  <p>Vérifiez les logs de sécurité</p>
                </li>
                <li>
                  <strong>Tests de pénétration</strong>
                  <p>Scanners automatiques (OWASP ZAP, etc.)</p>
                </li>
                <li>
                  <strong>@WithUserDetails</strong>
                  <p>Pour simuler des utilisateurs existants en base</p>
                </li>
                <li>
                  <strong>Données sensibles</strong>
                  <p>Ne pas logger les mots de passe/tokens</p>
                </li>
                <li>
                  <strong>Headers de sécurité</strong>
                  <p>CSP, XSS Protection, HSTS, etc.</p>
                </li>
                <li>
                  <strong>Brute force</strong>
                  <p>Testez le verrouillage après X tentatives</p>
                </li>
                <li>
                  <strong>Configuration CORS</strong>
                  <p>Vérifiez les domaines autorisés</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
        
        <!-- CI/CD -->
        <div class="tab-pane fade" id="ci" role="tabpanel">
          <div class="card">
            <div class="card-header spring-card">
              <h4><i class="bi bi-gear me-2"></i>10 Bonnes Pratiques - CI/CD</h4>
            </div>
            <div class="card-body">
              <ol class="practice-list" start="61">
                <li>
                  <strong>Lancez tous les tests à chaque commit</strong>
                  <p>Dans votre pipeline CI</p>
                </li>
                <li>
                  <strong>mvn verify ou gradle check</strong>
                  <p>Incluez ces commandes dans votre CI</p>
                </div>
                </li>
                <li>
                  <strong>Échec du pipeline si tests KO</strong>
                  <p>Ne pas déployer si des tests échouent</p>
                </li>
                <li>
                  <strong>JaCoCo et SonarQube</strong>
                  <p>Intégrez les rapports de couverture</p>
                </li>
                <li>
                  <strong>Environnements multiples</strong>
                  <p>Testez sur différentes versions de Java</p>
                </li>
                <li>
                  <strong>Séparez les tests lents</strong>
                  <p>Avec <code>@Tag("slow")</code> pour les exécuter moins souvent</p>
                </li>
                <li>
                  <strong>Optimisez les performances</strong>
                  <p>Cache Maven/Gradle, parallélisation</p>
                </li>
                <li>
                  <strong>Notifications</strong>
                  <p>Slack/Email en cas d'échec</p>
                </li>
                <li>
                  <strong>Artifacts de test</strong>
                  <p>Stockez les rapports HTML/PDF</p>
                </li>
                <li>
                  <strong>Docker pour les tests</strong>
                  <p>Utilisez des containers pour les dépendances</p>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Couverture de code -->
  <div class="card mt-4">
    <div class="card-header test-card">
      <h4><i class="bi bi-graph-up me-2"></i>Couverture de code avec JaCoCo</h4>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h5>Configuration Maven</h5>
          <div class="code-block">
            <pre>&lt;plugin&gt;
  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;0.8.11&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;&lt;goal&gt;prepare-agent&lt;/goal&gt;&lt;/goals&gt;
    &lt;/execution&gt;
    &lt;execution&gt;
      &lt;id&gt;report&lt;/id&gt;
      &lt;phase&gt;verify&lt;/phase&gt;
      &lt;goals&gt;&lt;goal&gt;report&lt;/goal&gt;&lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
  &lt;configuration&gt;
    &lt;excludes&gt;
      &lt;exclude&gt;**/model/*&lt;/exclude&gt;
      &lt;exclude&gt;**/config/*&lt;/exclude&gt;
    &lt;/excludes&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</pre>
          </div>
        </div>
        <div class="col-md-6">
          <h5>Objectifs de qualité</h5>
          <div class="quality-metrics">
            <div class="metric">
              <div class="metric-label">Instructions</div>
              <div class="progress">
                <div class="progress-bar bg-success" style="width: 90%">90%</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-label">Branches</div>
              <div class="progress">
                <div class="progress-bar bg-info" style="width: 80%">80%</div>
              </div>
            </div>
            <div class="metric">
              <div class="metric-label">Complexité</div>
              <div class="progress">
                <div class="progress-bar bg-warning" style="width: 70%">70%</div>
              </div>
            </div>
          </div>
          <div class="alert alert-info mt-3">
            <ul>
              <li>Exclure les DTO, configurations et classes simples</li>
              <li>Prioriser la couverture des classes critiques</li>
              <li>100% ne garantit pas zéro bug - qualité avant quantité</li>
              <li>Intégrer avec SonarQube pour plus d'analyses</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="jacoco" class="mb-5">
  <h2 class="text-center mb-4">JaCoCo - Couverture de Code Java</h2>
  
  <div class="row mb-4">
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-primary text-white">
          <i class="bi bi-graph-up me-2"></i>Introduction à JaCoCo
        </div>
        <div class="card-body">
          <p><strong>JaCoCo (Java Code Coverage)</strong> est un outil open-source qui mesure la couverture de code des tests unitaires en Java.</p>
          
          <h5 class="mt-3">Principales fonctionnalités :</h5>
          <ul>
            <li>Mesure la couverture par instructions (instructions Java bytecode)</li>
            <li>Mesure la couverture par branches (if/else, switch)</li>
            <li>Mesure la couverture par lignes de code</li>
            <li>Mesure la couverture par méthodes et classes</li>
            <li>Intégration avec Maven, Gradle, Ant et IDE</li>
            <li>Génération de rapports HTML, XML, CSV</li>
          </ul>
          
          <div class="alert alert-info mt-3">
            <i class="bi bi-lightbulb"></i> JaCoCo fonctionne en instrumentant le bytecode Java, soit à la volée (agent Java), soit hors ligne.
          </div>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-primary text-white">
          <i class="bi bi-gear me-2"></i>Configuration Maven
        </div>
        <div class="card-body">
          <p>Configuration de base dans <code>pom.xml</code> :</p>
          <pre><code class="language-xml">&lt;plugin&gt;
  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;0.8.8&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;
        &lt;goal&gt;prepare-agent&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
    &lt;execution&gt;
      &lt;id&gt;report&lt;/id&gt;
      &lt;phase&gt;test&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;report&lt;/goal&gt;
      &lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>

          <h5 class="mt-3">Seuils de couverture :</h5>
          <pre><code class="language-xml">&lt;execution&gt;
  &lt;id&gt;check-coverage&lt;/id&gt;
  &lt;goals&gt;
    &lt;goal&gt;check&lt;/goal&gt;
  &lt;/goals&gt;
  &lt;configuration&gt;
    &lt;rules&gt;
      &lt;rule&gt;
        &lt;element&gt;CLASS&lt;/element&gt;
        &lt;limits&gt;
          &lt;limit&gt;
            &lt;counter&gt;LINE&lt;/counter&gt;
            &lt;value&gt;COVEREDRATIO&lt;/value&gt;
            &lt;minimum&gt;0.80&lt;/minimum&gt;
          &lt;/limit&gt;
        &lt;/limits&gt;
      &lt;/rule&gt;
    &lt;/rules&gt;
  &lt;/configuration&gt;
&lt;/execution&gt;</code></pre>
        </div>
      </div>
    </div>
  </div>
  
  <div class="row mb-4">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header bg-success text-white">
          <i class="bi bi-file-earmark-bar-graph me-2"></i>Interprétation du Rapport JaCoCo
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <h5>Métriques principales :</h5>
              <table class="table table-bordered">
                <thead>
                  <tr>
                    <th>Métrique</th>
                    <th>Description</th>
                    <th>Objectif</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Instructions</td>
                    <td>Bytecode Java exécuté</td>
                    <td>> 85%</td>
                  </tr>
                  <tr>
                    <td>Branches</td>
                    <td>Couverture des chemins (if/else)</td>
                    <td>> 70%</td>
                  </tr>
                  <tr>
                    <td>Complexité cyclomatique</td>
                    <td>Nombre de chemins possibles</td>
                    <td>Par méthode: < 10</td>
                  </tr>
                  <tr>
                    <td>Lignes</td>
                    <td>Lignes de code exécutées</td>
                    <td>> 80%</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-md-6">
              <h5>Exemple de rapport :</h5>
              <img src="images/jacoco-report.png" alt="Rapport JaCoCo" class="img-fluid border">
              <p class="mt-2">Les couleurs indiquent :
                <span class="text-success">■ Couvert</span>, 
                <span class="text-danger">■ Non couvert</span>, 
                <span class="text-warning">■ Partiellement couvert</span>
              </p>
            </div>
          </div>
          
          <div class="alert alert-warning mt-3">
            <i class="bi bi-exclamation-triangle"></i> Attention à ne pas confondre couverture de code et qualité des tests. 
            100% de couverture ne garantit pas des tests efficaces !
          </div>
		  
		  <div class="testing-quality-explanation">
  <h3 class="alert alert-warning">Attention : Couverture de Code ≠ Qualité des Tests</h3>
  
  <div class="myth-reality">
    <div class="myth">
      <h4><i class="bi bi-x-circle-fill text-danger"></i> Mythe courant</h4>
      <p>"Atteindre 100% de couverture de code signifie que mon application est parfaitement testée."</p>
    </div>
    
    <div class="reality">
      <h4><i class="bi bi-check-circle-fill text-success"></i> Réalité</h4>
      <p>La couverture mesure seulement quelles lignes sont exécutées, pas la pertinence des assertions ni les cas limites couverts.</p>
    </div>
  </div>

  <div class="coverage-limitations">
    <h5>Limites de la couverture de code :</h5>
    <ul class="list-group">
      <li class="list-group-item">
        <strong>Faux positifs :</strong> Exécuter du code ≠ tester son comportement
        <div class="example">
          <code>// Test passant mais inutile<br>expect(true).toBe(true);</code>
        </div>
      </li>
      <li class="list-group-item">
        <strong>Cas limites ignorés :</strong> 100% de couverture peut manquer :
        <ul>
          <li>Entrées invalides</li>
          <li>Conditions aux limites</li>
          <li>États d'erreur</li>
        </ul>
      </li>
      <li class="list-group-item">
        <strong>Complexité non mesurée :</strong> Ne détecte pas :
        <ul>
          <li>Tests redondants</li>
          <li>Assertions trop larges</li>
          <li>Dépendances non mockées</li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="quality-metrics mt-4">
    <h5>Indicateurs de qualité des tests (bien plus importants) :</h5>
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-header">Pertinence des assertions</div>
        <div class="metric-body">
          Vérifient-elles le <strong>comportement</strong> attendu, pas juste l'exécution ?
          <div class="badge bg-primary">Exemple :</div>
          <code>expect(validateEmail('test@test.com')).toBe(true); // Bon<br>
          expect(validateEmail).toHaveBeenCalled(); // Peu utile seul</code>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-header">Cas limites couverts</div>
        <div class="metric-body">
          <ul>
            <li>Entrées vides/nulles</li>
            <li>Valeurs extrêmes</li>
            <li>Formats invalides</li>
          </ul>
          <div class="badge bg-primary">Exemple email :</div>
          <code>test@, @test.com, test@test.</code>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-header">Maintenabilité</div>
        <div class="metric-body">
          <ul>
            <li>Nommage clair des tests</li>
            <li>Pas de duplication</li>
            <li>Indépendance des tests</li>
          </ul>
          <div class="badge bg-primary">Anti-pattern :</div>
          <code>test('Test 1', () => { ... }); // Trop vague</code>
        </div>
      </div>
    </div>
  </div>

  <div class="best-practices mt-4 p-3 bg-light">
    <h5><i class="bi bi-lightbulb"></i> Bonnes pratiques :</h5>
    <table class="table">
      <thead>
        <tr>
          <th>À faire</th>
          <th>À éviter</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Tester les comportements métier</td>
          <td>Tester l'implémentation interne</td>
        </tr>
        <tr>
          <td>Utiliser des données réalistes</td>
          <td>Données trop simples ("aaa", 123)</td>
        </tr>
        <tr>
          <td>1 assertion par cas de test</td>
          <td>Tests fourre-tout</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="conclusion alert alert-info mt-3">
    <strong>Règle d'or :</strong> Viser une couverture raisonnable (70-80%) avec des tests <strong>pertinents</strong> plutôt que 100% de couverture avec des tests <strong>superficiels</strong>.
  </div>
</div>

        </div>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-info text-white">
          <i class="bi bi-best-fill me-2"></i>Bonnes Pratiques
        </div>
        <div class="card-body">
          <ul>
            <li><strong>Seuils réalistes :</strong> 80% lignes, 70% branches est un bon départ</li>
            <li><strong>Exclure le code généré :</strong> DTOs, Constructeurs, Getters/Setters</li>
            <li><strong>Focus sur les parties critiques :</strong> Logique métier > couche web</li>
            <li><strong>Intégration CI :</strong> Bloquer le build si couverture insuffisante</li>
            <li><strong>Revues de code :</strong> Analyser les parties non couvertes</li>
          </ul>
          
          <h5 class="mt-3">Exclusion de classes :</h5>
          <pre><code class="language-xml">&lt;configuration&gt;
  &lt;excludes&gt;
    &lt;exclude&gt;**/model/*.class&lt;/exclude&gt;
    &lt;exclude&gt;**/config/*.class&lt;/exclude&gt;
    &lt;exclude&gt;**/Application.class&lt;/exclude&gt;
  &lt;/excludes&gt;
&lt;/configuration&gt;</code></pre>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header bg-info text-white">
          <i class="bi bi-tools me-2"></i>Astuces Avancées
        </div>
        <div class="card-body">
          <h5>Merge des rapports (multi-modules) :</h5>
          <pre><code class="language-xml">&lt;execution&gt;
  &lt;id&gt;merge-results&lt;/id&gt;
  &lt;phase&gt;verify&lt;/phase&gt;
  &lt;goals&gt;
    &lt;goal&gt;merge&lt;/goal&gt;
  &lt;/goals&gt;
  &lt;configuration&gt;
    &lt;fileSets&gt;
      &lt;fileSet&gt;
        &lt;directory&gt;${project.basedir}&lt;/directory&gt;
        &lt;includes&gt;
          &lt;include&gt;**/target/jacoco.exec&lt;/include&gt;
        &lt;/includes&gt;
      &lt;/fileSet&gt;
    &lt;/fileSets&gt;
    &lt;destFile&gt;${project.basedir}/target/jacoco.exec&lt;/destFile&gt;
  &lt;/configuration&gt;
&lt;/execution&gt;</code></pre>
          
          <h5 class="mt-3">Couverture minimum par package :</h5>
          <pre><code class="language-xml">&lt;rules&gt;
  &lt;rule&gt;
    &lt;element&gt;PACKAGE&lt;/element&gt;
    &lt;limits&gt;
      &lt;limit&gt;
        &lt;counter&gt;LINE&lt;/counter&gt;
        &lt;value&gt;COVEREDRATIO&lt;/value&gt;
        &lt;minimum&gt;0.75&lt;/minimum&gt;
      &lt;/limit&gt;
    &lt;/limits&gt;
    &lt;includes&gt;
      &lt;include&gt;com.monapp.metier.*&lt;/include&gt;
    &lt;/includes&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</code></pre>
        </div>
      </div>
    </div>
  </div>
  
  <div class="card mt-4">
    <div class="card-header bg-danger text-white">
      <i class="bi bi-exclamation-octagon me-2"></i>Pièges à Éviter
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h5>1. Couverture artificielle</h5>
          <p>Éviter les tests qui appellent le code sans vérifications :</p>
          <pre><code class="language-java">// ❌ Mauvais - Appel sans assertion
@Test
void testProcess() {
    processor.process(); // Juste pour couvrir
}

// ✅ Bon - Vérification du comportement
@Test
void testProcess() {
    Result result = processor.process();
    assertThat(result.isValid()).isTrue();
    assertThat(result.getItems()).hasSize(3);
}</code></pre>
        </div>
        <div class="col-md-6">
          <h5>2. Ignorer les branches</h5>
          <p>Tester tous les chemins conditionnels :</p>
          <pre><code class="language-java">public String getStatus(int value) {
    if (value > 100) { // Branche souvent oubliée
        return "HIGH";
    }
    return "NORMAL";
}

@Test
void shouldReturnHighWhenOver100() {
    assertThat(service.getStatus(101)).isEqualTo("HIGH");
}</code></pre>
        </div>
      </div>
      
      <div class="row mt-3">
        <div class="col-md-6">
          <h5>3. Tests dépendants de l'implémentation</h5>
          <pre><code class="language-java">// ❌ Test fragile
@Test
void testInternalLogic() {
    verify(internalHelper).process(any());
    
    // Le test échouera si l'implémentation change
    // même si le comportement externe est identique
}</code></pre>
        </div>
        <div class="col-md-6">
          <h5>4. Oublier les cas d'erreur</h5>
          <pre><code class="language-java">@Test
void shouldThrowExceptionWhenInvalidInput() {
    assertThrows(InvalidInputException.class, () -> {
        service.process(null);
    });
}</code></pre>
        </div>
      </div>
    </div>
  </div>
  
  <div class="card mt-4">
    <div class="card-header bg-dark text-white">
      <i class="bi bi-git me-2"></i>Intégration avec CI/CD
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h5>GitHub Actions</h5>
          <pre><code class="language-yaml">- name: Test with Maven and JaCoCo
  run: mvn test jacoco:report

- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v2
  with:
    files: ./target/site/jacoco/jacoco.xml</code></pre>
        </div>
        <div class="col-md-6">
          <h5>Jenkins Pipeline</h5>
          <pre><code class="language-groovy">stage('Test and Coverage') {
    steps {
        sh 'mvn clean test jacoco:report'
        jacoco(
            execPattern: 'target/jacoco.exec',
            classPattern: 'target/classes',
            sourcePattern: 'src/main/java'
        )
    }
    post {
        always {
            publishHTML(
                target: [
                    allowMissing: false,
                    alwaysLinkToLastBuild: false,
                    keepAll: true,
                    reportDir: 'target/site/jacoco',
                    reportFiles: 'index.html',
                    reportName: 'JaCoCo Report'
                ]
            )
        }
    }
}</code></pre>
        </div>
      </div>
    </div>
  </div>
</section>

    <section id="cas-pratiques" class="mb-5">
      <h2 class="text-center mb-4">Cas pratiques</h2>
      
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <div class="col">
          <div class="card h-100 tdd-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-book me-2"></i>
              <h5 class="mb-0">Gestion des étudiants</h5>
            </div>
            <div class="card-body">
              <p>Implémentation TDD complète d'un système de gestion d'étudiants.</p>
              <p><strong>Fonctionnalités :</strong> CRUD, validation, recherche, pagination.</p>
              <button class="btn btn-tdd btn-sm mt-2" onclick="showCaseStudy('gestion-etudiants')">
                <i class="bi bi-journal-text me-1"></i>Voir la solution
              </button>
            </div>
          </div>
        </div>
        
        <div class="col">
          <div class="card h-100 spring-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-cart me-2"></i>
              <h5 class="mb-0">API e-commerce</h5>
            </div>
            <div class="card-body">
              <p>Développement piloté par les tests d'une API REST pour un site e-commerce.</p>
              <p><strong>Technologies :</strong> Spring Boot, JPA, Security, OpenAPI.</p>
              <button class="btn btn-spring btn-sm mt-2" onclick="showCaseStudy('api-ecommerce')">
                <i class="bi bi-journal-text me-1"></i>Voir la solution
              </button>
            </div>
          </div>
        </div>
        
        <div class="col">
          <div class="card h-100 test-card">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-shield-lock me-2"></i>
              <h5 class="mb-0">Système d'authentification</h5>
            </div>
            <div class="card-body">
              <p>Implémentation sécurisée avec tests complets (unitaires, intégration, sécurité).</p>
              <p><strong>Fonctionnalités :</strong> JWT, OAuth2, RBAC, validation.</p>
              <button class="btn btn-test btn-sm mt-2" onclick="showCaseStudy('auth-system')">
                <i class="bi bi-journal-text me-1"></i>Voir la solution
              </button>
            </div>
          </div>
        </div>
        
        <div class="col">
          <div class="card h-100">
            <div class="card-header d-flex align-items-center">
              <i class="bi bi-graph-up me-2"></i>
              <h5 class="mb-0">Microservices</h5>
            </div>
            <div class="card-body">
              <p>Architecture microservices avec tests contractuels et tests E2E.</p>
              <p><strong>Technologies :</strong> Spring Cloud, Contract, Kubernetes.</p>
              <button class="btn btn-primary btn-sm mt-2" onclick="showCaseStudy('microservices')">
                <i class="bi bi-journal-text me-1"></i>Voir la solution
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="ressources" class="mb-5">
      <h2 class="text-center mb-4">Ressources supplémentaires</h2>
      
      <div class="row">
        <div class="col-md-6">
          <div class="card mb-4">
            <div class="card-header">
              <h5 class="mb-0">Livres recommandés</h5>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">"Test Driven Development: By Example" - Kent Beck</li>
                <li class="list-group-item">"Growing Object-Oriented Software, Guided by Tests" - Freeman & Pryce</li>
                <li class="list-group-item">"Effective Java" - Joshua Bloch</li>
                <li class="list-group-item">"Spring in Action" - Craig Walls</li>
                <li class="list-group-item">"Clean Code" - Robert C. Martin</li>
              </ul>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="card mb-4">
            <div class="card-header">
              <h5 class="mb-0">Outils et frameworks</h5>
            </div>
            <div class="card-body">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">JUnit 5</li>
                <li class="list-group-item">Mockito</li>
                <li class="list-group-item">TestContainers</li>
                <li class="list-group-item">Cucumber</li>
                <li class="list-group-item">Selenium</li>
                <li class="list-group-item">JaCoCo</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">Formations et certifications</h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <h6>En ligne</h6>
              <ul>
                <li>Cours TDD sur Udemy/Coursera</li>
                <li>Spring Boot Testing Guides</li>
                <li>Documentation JUnit 5</li>
                <li>Tutoriels Mockito</li>
              </ul>
            </div>
            <div class="col-md-6">
              <h6>Certifications</h6>
              <ul>
                <li>Spring Professional Certification</li>
                <li>Java Certification</li>
                <li>ISTQB (Testing)</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <footer>
    <div class="container text-center">
      <p class="mb-0">Portail TDD & Spring Boot - Bonnes pratiques de développement</p>
      <p class="mb-0">© 2023 - Tous droits réservés</p>
    </div>
  </footer>

  <!-- Modal for details -->
  <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="detailsModalLabel">Détails</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="detailsModalContent">
          Chargement...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // DOM elements
    const detailsModal = new bootstrap.Modal(document.getElementById('detailsModal'));
    const detailsModalTitle = document.getElementById('detailsModalLabel');
    const detailsModalContent = document.getElementById('detailsModalContent');

    function showDetails(type) {
      let title = '';
      let content = '';

      switch(type) {
        case 'tdd-intro':
          title = 'Introduction au TDD';
          content = `
            <h5>Le cycle Red-Green-Refactor</h5>
            <p>Le TDD suit un cycle strict en trois phases :</p>
            <ol>
              <li><strong>Red :</strong> Écrire un test qui échoue (le comportement n'existe pas encore)</li>
              <li><strong>Green :</strong> Implémenter le code minimal pour faire passer le test</li>
              <li><strong>Refactor :</strong> Améliorer la qualité du code sans changer son comportement</li>
            </ol>
            
            <h5 class="mt-4">Avantages clés</h5>
            <ul>
              <li><strong>Design émergent :</strong> Le code évolue naturellement vers une bonne architecture</li>
              <li><strong>Documentation vivante :</strong> Les tests servent d'exemples d'utilisation</li>
              <li><strong>Confiance :</strong> Possibilité de refactorer en toute sécurité</li>
              <li><strong>Couverture :</strong> Tous les comportements sont testés par définition</li>
            </ul>
            
            <div class="alert alert-info mt-4">
              <p><strong>Astuce :</strong> Commencez par des petits projets pour vous familiariser avec le cycle TDD avant de l'appliquer à des projets complexes.</p>
            </div>
          `;
          break;

        case 'tdd-example':
          title = 'Exemple complet de TDD';
          content = `
            <h5>Développement d'une calculatrice</h5>
            <p>Voici un exemple complet de développement avec TDD :</p>
            
            <h6 class="mt-3">Étape 1 : Test d'addition (RED)</h6>
            <div class="code-block">
              <pre>@Test
void shouldReturn4WhenAdding2And2() {
    Calculator calc = new Calculator();
    assertEquals(4, calc.add(2, 2));
}</pre>
            </div>
            <p>Ce test échoue car la classe Calculator n'existe pas encore.</p>
            
            <h6 class="mt-3">Étape 2 : Implémentation minimale (GREEN)</h6>
            <div class="code-block">
              <pre>public class Calculator {
    public int add(int a, int b) {
        return a + b;
    }
}</pre>
            </div>
            <p>Le test passe maintenant.</p>
            
            <h6 class="mt-3">Étape 3 : Refactor</h6>
            <p>On pourrait améliorer la classe Calculator :</p>
            <ul>
              <li>Ajouter la validation des entrées</li>
              <li>Ajouter des logs</li>
              <li>Gérer les overflow</li>
            </ul>
            
            <h5 class="mt-4">Autres exemples</h5>
            <p>Le même principe s'applique à :</p>
            <ul>
              <li>Validation de données</li>
              <li>Calculs métiers</li>
              <li>Transformations de données</li>
              <li>Algorithmes</li>
            </ul>
          `;
          break;

        case 'tdd-benefits':
          title = 'Avantages du TDD';
          content = `
            <h5>Pourquoi adopter le TDD ?</h5>
            <div class="row">
              <div class="col-md-6">
                <div class="card mb-3">
                  <div class="card-header bg-tdd text-white">
                    <h6>Qualité du code</h6>
                  </div>
                  <div class="card-body">
                    <ul>
                      <li>Moins de bugs en production</li>
                      <li>Couverture de test élevée</li>
                      <li>Design plus modulaire</li>
                      <li>Meilleure maintenabilité</li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card mb-3">
                  <div class="card-header bg-tdd text-white">
                    <h6>Productivité</h6>
                  </div>
                  <div class="card-body">
                    <ul>
                      <li>Moins de temps passé à déboguer</li>
                      <li>Refactoring sécurisé</li>
                      <li>Documentation implicite</li>
                      <li>Confiance dans les modifications</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            
            <h5 class="mt-4">Études de cas</h5>
            <p>Plusieurs études ont montré que le TDD :</p>
            <ul>
              <li>Réduit les bugs de 40-90%</li>
              <li>Augmente le temps de développement initial de 15-35%</li>
              <li>Réduit le temps total du projet grâce à moins de corrections</li>
              <li>Améliore la satisfaction des développeurs</li>
            </ul>
          `;
          break;

        case 'tdd-challenges':
          title = 'Défis du TDD et solutions';
          content = `
            <h5>Défis courants avec le TDD</h5>
            <table class="table table-sm">
              <thead>
                <tr><th>Défi</th><th>Solution</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>Courbe d'apprentissage</td>
                  <td>Commencez petit, formez-vous, pratiquez régulièrement</td>
                </tr>
                <tr>
                  <td>Tests trop lents</td>
                  <td>Isolez les tests lents, utilisez des mocks judicieusement</td>
                </tr>
                <tr>
                  <td>Tests fragiles</td>
                  <td>Évitez de tester les détails d'implémentation, testez le comportement</td>
                </tr>
                <tr>
                  <td>Temps initial plus long</td>
                  <td>Investissement qui paie à moyen/long terme</td>
                </tr>
                <tr>
                  <td>Difficulté à tester le legacy</td>
                  <td>Commencez par ajouter des tests autour du code existant</td>
                </tr>
              </tbody>
            </table>
            
            <h5 class="mt-4">Conseils pour réussir</h5>
            <div class="alert alert-info">
              <ul>
                <li>Commencez par des petits projets pour prendre l'habitude</li>
                <li>Pratiquez le "TDD ping-pong" en binôme</li>
                <li>Ne sautez pas l'étape de refactoring</li>
                <li>Écrivez des tests lisibles et bien nommés</li>
                <li>Intégrez le TDD dans votre workflow CI/CD</li>
              </ul>
            </div>
          `;
          break;

        case 'spring-testing':
          title = 'Testing avec Spring Boot';
          content = `
            <h5>Annotations principales</h5>
            <table class="table table-sm">
              <thead>
                <tr><th>Annotation</th><th>Description</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>@SpringBootTest</code></td>
                  <td>Charge le contexte Spring complet pour les tests d'intégration</td>
                </tr>
                <tr>
                  <td><code>@WebMvcTest</code></td>
                  <td>Test des contrôleurs MVC (sans charger tout le contexte)</td>
                </tr>
                <tr>
                  <td><code>@DataJpaTest</code></td>
                  <td>Test des repositories JPA avec une base configurée</td>
                </tr>
                <tr>
                  <td><code>@MockBean</code></td>
                  <td>Crée un mock Spring pour remplacer un bean</td>
                </tr>
                <tr>
                  <td><code>@TestPropertySource</code></td>
                  <td>Définit des propriétés spécifiques pour le test</td>
                </tr>
              </tbody>
            </table>
            
            <h5 class="mt-4">Exemple complet</h5>
            <div class="code-block">
              <pre>@SpringBootTest
@AutoConfigureMockMvc
class UserControllerIntegrationTest {
    @Autowired MockMvc mvc;
    @Autowired UserRepository repo;
    
    @BeforeEach
    void setup() {
        repo.deleteAll();
        repo.save(new User("test@example.com"));
    }
    
    @Test
    void shouldGetUser() throws Exception {
        mvc.perform(get("/users/test@example.com"))
          .andExpect(status().isOk())
          .andExpect(jsonPath("$.email").value("test@example.com"));
    }
}</pre>
            </div>
          `;
          break;

        case 'integration-tests':
          title = 'Tests d\'intégration avec TestContainers';
          content = `
            <h5>TestContainers pour Spring Boot</h5>
            <p>TestContainers permet d'utiliser des containers Docker pour des tests d'intégration réalistes.</p>
            
            <h6 class="mt-3">Configuration de base</h6>
            <div class="code-block">
              <pre>@Testcontainers
@DataJpaTest
@AutoConfigureTestDatabase(replace = NONE)
class UserRepositoryTest {
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:15");
    
    @DynamicPropertySource
    static void configureProperties(DynamicPropertyRegistry registry) {
        registry.add("spring.datasource.url", postgres::getJdbcUrl);
        registry.add("spring.datasource.username", postgres::getUsername);
        registry.add("spring.datasource.password", postgres::getPassword);
    }
    
    @Autowired UserRepository repo;
    
    @Test
    void shouldSaveUser() {
        User saved = repo.save(new User("test@example.com"));
        assertNotNull(saved.getId());
    }
}</pre>
            </div>
            
            <h5 class="mt-4">Avantages</h5>
            <ul>
              <li>Tests contre une vraie base de données</li>
              <li>Isolation complète des tests</li>
              <li>Support pour PostgreSQL, MySQL, MongoDB, etc.</li>
              <li>Intégration transparente avec Spring Boot</li>
            </ul>
            
            <div class="alert alert-warning mt-3">
              <p><strong>Attention :</strong> Les tests avec TestContainers sont plus lents que les tests avec une base en mémoire. Utilisez-les judicieusement.</p>
            </div>
          `;
          break;

        case 'bdd-tests':
          title = 'Tests BDD avec Cucumber';
          content = `
            <h5>Behavior Driven Development</h5>
            <p>Le BDD permet de décrire le comportement du système en langage naturel.</p>
            
            <h6 class="mt-3">Exemple de fichier .feature</h6>
            <div class="code-block">
              <pre>Feature: Gestion des utilisateurs
  Scenario: Création d'un utilisateur valide
    Given Un formulaire de création d'utilisateur vide
    When Je saisis "test@example.com" dans le champ email
    And Je saisis "password123" dans le champ mot de passe
    And Je soumets le formulaire
    Then Je devrais voir "Utilisateur créé avec succès"
    And Un nouvel utilisateur avec email "test@example.com" devrait exister</pre>
            </div>
            
            <h6 class="mt-3">Implémentation Java</h6>
            <div class="code-block">
              <pre>public class UserSteps {
    @Given("Un formulaire de création d'utilisateur vide")
    public void emptyForm() {
        driver.get("/users/new");
    }
    
    @When("Je saisis {string} dans le champ email")
    public void fillEmail(String email) {
        driver.findElement(By.name("email")).sendKeys(email);
    }
    
    @Then("Un nouvel utilisateur avec email {string} devrait exister")
    public void verifyUserExists(String email) {
        assertTrue(userRepository.findByEmail(email).isPresent());
    }
}</pre>
            </div>
            
            <h5 class="mt-4">Avantages du BDD</h5>
            <ul>
              <li>Collaboration avec les non-développeurs</li>
              <li>Documentation vivante</li>
              <li>Tests orientés métier</li>
              <li>Facile à maintenir</li>
            </ul>
          `;
          break;

        case 'ui-tests':
          title = 'Tests UI avec Selenium et Page Object Model';
          content = `
            <h5>Page Object Model (POM)</h5>
            <p>Le POM est un design pattern pour organiser les tests Selenium.</p>
            
            <h6 class="mt-3">Exemple de Page Object</h6>
            <div class="code-block">
              <pre>public class LoginPage {
    private final WebDriver driver;
    
    @FindBy(name = "username") private WebElement usernameField;
    @FindBy(name = "password") private WebElement passwordField;
    @FindBy(tagName = "button") private WebElement loginButton;
    
    public LoginPage(WebDriver driver) {
        this.driver = driver;
        PageFactory.initElements(driver, this);
    }
    
    public void login(String username, String password) {
        usernameField.sendKeys(username);
        passwordField.sendKeys(password);
        loginButton.click();
    }
    
    public boolean isErrorMessageDisplayed() {
        return driver.findElements(By.className("error")).size() > 0;
    }
}</pre>
            </div>
            
            <h6 class="mt-3">Utilisation dans les tests</h6>
            <div class="code-block">
              <pre>@Test
void shouldShowErrorOnInvalidLogin() {
    LoginPage loginPage = new LoginPage(driver);
    loginPage.login("invalid", "credentials");
    
    assertTrue(loginPage.isErrorMessageDisplayed());
}</pre>
            </div>
            
            <h5 class="mt-4">Bonnes pratiques</h5>
            <ul>
              <li>Une classe par page/fragment</li>
              <li>Méthodes pour les actions utilisateur</li>
              <li>Méthodes pour les vérifications</li>
              <li>Ne pas exposer les WebElements directement</li>
              <li>Gérer les attentes explicitement</li>
            </ul>
          `;
          break;

        case 'performance-tests':
          title = 'Tests de performance avec JMH';
          content = `
            <h5>Java Microbenchmark Harness (JMH)</h5>
            <p>JMH est l'outil standard pour les micro-benchmarks en Java.</p>
            
            <h6 class="mt-3">Exemple de benchmark</h6>
            <div class="code-block">
              <pre>@Benchmark
@BenchmarkMode(Mode.AverageTime)
@OutputTimeUnit(TimeUnit.MILLISECONDS)
@Fork(value = 2)
@Warmup(iterations = 3)
@Measurement(iterations = 5)
public void benchmarkUserCreation() {
    userService.createUser(new User("test_" + System.nanoTime()));
}</pre>
            </div>
            
            <h6 class="mt-3">Configuration Spring Boot</h6>
            <div class="code-block">
              <pre>@SpringBootTest
@State(Scope.Benchmark)
public class UserServiceBenchmark {
    @Autowired UserService userService;
    
    @Benchmark
    public void benchmark() {
        // code du benchmark
    }
    
    public static void main(String[] args) throws RunnerException {
        Options opt = new OptionsBuilder()
            .include(UserServiceBenchmark.class.getSimpleName())
            .build();
        new Runner(opt).run();
    }
}</pre>
            </div>
            
            <h5 class="mt-4">Bonnes pratiques</h5>
            <ul>
              <li>Utilisez suffisamment de warmup iterations</li>
              <li>Évitez les optimisations du dead code</li>
              <li>Testez des scénarios réalistes</li>
              <li>Comparez plusieurs implémentations</li>
              <li>Exécutez sur une machine dédiée</li>
            </ul>
          `;
          break;

        default:
          title = 'Détails techniques';
          content = `
            <div class="alert alert-info">
              <p>Cette section est en cours d'enrichissement.</p>
              <p class="mb-0">Nous ajoutons continuellement de nouveaux contenus techniques détaillés.</p>
            </div>
          `;
      }

      detailsModalTitle.textContent = title;
      detailsModalContent.innerHTML = content;
      detailsModal.show();
    }

    function showCaseStudy(caseId) {
      let title = '';
      let content = '';

      switch(caseId) {
        case 'gestion-etudiants':
          title = 'Gestion des étudiants avec TDD';
          content = `
            <h5>Contexte</h5>
            <p>Développement d'un système de gestion d'étudiants pour une université en suivant strictement le TDD.</p>
            
            <h5 class="mt-4">Fonctionnalités implémentées</h5>
            <ul>
              <li>CRUD complet des étudiants</li>
              <li>Validation des données (nom, email, etc.)</li>
              <li>Recherche multicritère</li>
              <li>Pagination des résultats</li>
              <li>Statistiques (moyenne d'âge, répartition par filière)</li>
              <li>Export CSV/PDF</li>
            </ul>
            
            <h5 class="mt-4">Processus TDD</h5>
            <ol>
              <li>Écriture du test pour la création d'étudiant (RED)</li>
              <li>Implémentation minimale du service (GREEN)</li>
              <li>Refactor pour ajouter la validation</li>
              <li>Écriture du test pour la recherche (RED)</li>
              <li>Implémentation du repository (GREEN)</li>
              <li>Refactor pour optimiser les requêtes</li>
              <li>Répétition pour chaque nouvelle fonctionnalité</li>
            </ol>
            
            <h5 class="mt-4">Technologies</h5>
            <ul>
              <li>Spring Boot 3</li>
              <li>Spring Data JPA</li>
              <li>Hibernate Validator</li>
              <li>JUnit 5</li>
              <li>Mockito</li>
              <li>TestContainers (PostgreSQL)</li>
              <li>Lombok</li>
            </ul>
            
            <h5 class="mt-4">Leçons apprises</h5>
            <div class="alert alert-info">
              <ul>
                <li>Le TDD force à bien définir les spécifications avant de coder</li>
                <li>Les tests servent de documentation technique</li>
                <li>Le refactoring est beaucoup moins risqué avec une bonne couverture</li>
                <li>TestContainers permet des tests d'intégration très réalistes</li>
              </ul>
            </div>
          `;
          break;

        case 'api-ecommerce':
          title = 'API e-commerce avec Spring Boot';
          content = `
            <h5>Contexte</h5>
            <p>Développement d'une API REST pour une plateforme e-commerce en suivant les bonnes pratiques de test.</p>
            
            <h5 class="mt-4">Fonctionnalités clés</h5>
            <ul>
              <li>Gestion des produits et catégories</li>
              <li>Panier d'achat</li>
              <li>Commandes et paiements</li>
              <li>Authentification JWT</li>
              <li>Documentation OpenAPI</li>
              <li>Cache Redis</li>
            </ul>
            
            <h5 class="mt-4">Stratégie de test</h5>
            <div class="row">
              <div class="col-md-6">
                <h6>Tests unitaires</h6>
                <ul>
                  <li>Services métier</li>
                  <li>Utils et helpers</li>
                  <li>Validation</li>
                  <li>Calculs de prix</li>
                </ul>
              </div>
              <div class="col-md-6">
                <h6>Tests d'intégration</h6>
                <ul>
                  <li>API endpoints (MockMvc)</li>
                  <li>Intégration JPA</li>
                  <li>Cache configuration</li>
                  <li>Sécurité</li>
                </ul>
              </div>
            </div>
            
            <h5 class="mt-4">Stack technique</h5>
            <table class="table table-sm">
              <thead>
                <tr><th>Composant</th><th>Technologie</th></tr>
              </thead>
              <tbody>
                <tr><td>API REST</td><td>Spring Web</td></tr>
                <tr><td>Persistence</td><td>Spring Data JPA + PostgreSQL</td></tr>
                <tr><td>Sécurité</td><td>Spring Security + JWT</td></tr>
                <tr><td>Cache</td><td>Redis</td></tr>
                <tr><td>Documentation</td><td>SpringDoc OpenAPI</td></tr>
                <tr><td>Tests</td><td>JUnit 5, Mockito, TestContainers</td></tr>
              </tbody>
            </table>
          `;
          break;

        case 'auth-system':
          title = 'Système d\'authentification sécurisé';
          content = `
            <h5>Contexte</h5>
            <p>Implémentation d'un système d'authentification moderne avec tests complets.</p>
            
            <h5 class="mt-4">Fonctionnalités</h5>
            <ul>
              <li>Inscription avec email de confirmation</li>
              <li>Connexion JWT</li>
              <li>Renouvellement de token</li>
              <li>RBAC (Role-Based Access Control)</li>
              <li>OAuth2 (Google, GitHub)</li>
              <li>Mots de passe oubliés</li>
            </ul>
            
            <h5 class="mt-4">Couverture de test</h5>
            <div class="row">
              <div class="col-md-4">
                <div class="card mb-3">
                  <div class="card-header bg-test text-white">
                    <h6>Unitaires</h6>
                  </div>
                  <div class="card-body">
                    <ul>
                      <li>Services d'authentification</li>
                      <li>Générateur de tokens</li>
                      <li>Validation</li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-3">
                  <div class="card-header bg-test text-white">
                    <h6>Intégration</h6>
                  </div>
                  <div class="card-body">
                    <ul>
                      <li>Endpoints API</li>
                      <li>Intégration JPA</li>
                      <li>Email service</li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card mb-3">
                  <div class="card-header bg-test text-white">
                    <h6>Sécurité</h6>
                  </div>
                  <div class="card-body">
                    <ul>
                      <li>Tests de pénétration</li>
                      <li>Scénarios malveillants</li>
                      <li>Configuration sécurité</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            
            <h5 class="mt-4">Exemple de test de sécurité</h5>
            <div class="code-block">
              <pre>@Test
void shouldPreventTokenForgery() {
    // Génère un token valide
    String validToken = tokenService.generateToken(user);
    
    // Modifie le token
    String forgedToken = validToken.substring(0, validToken.length() - 2) + "xx";
    
    // Tente de l'utiliser
    assertThrows(InvalidTokenException.class, 
        () -> tokenService.validateToken(forgedToken));
}</pre>
            </div>
          `;
          break;

        case 'microservices':
          title = 'Architecture Microservices';
          content = `
            <h5>Contexte</h5>
            <p>Développement d'une architecture microservices avec tests contractuels et E2E.</p>
            
            <h5 class="mt-4">Services</h5>
            <ul>
              <li>Service Utilisateurs</li>
              <li>Service Commandes</li>
              <li>Service Paiements</li>
              <li>Service Notifications</li>
              <li>API Gateway</li>
              <li>Service Discovery</li>
            </ul>
            
            <h5 class="mt-4">Stratégie de test</h5>
            <div class="process-step">
              <h6>1. Tests unitaires</h6>
              <p>Dans chaque service indépendamment</p>
            </div>
            <div class="process-step">
              <h6>2. Tests contractuels</h6>
              <p>Avec Spring Cloud Contract pour définir les contrats entre services</p>
            </div>
            <div class="process-step">
              <h6>3. Tests d'intégration</h6>
              <p>TestContainers pour les dépendances (bases de données, etc.)</p>
            </div>
            <div class="process-step">
              <h6>4. Tests E2E</h6>
              <p>Avec une orchestration complète en environnement de test</p>
            </div>
            
            <h5 class="mt-4">Spring Cloud Contract</h5>
            <div class="code-block">
              <pre>Contract.make {
    request {
        method 'GET'
        url '/users/123'
    }
    response {
        status 200
        body([
            id: 123,
            name: "John Doe",
            email: "john@example.com"
        ])
        headers {
            contentType('application/json')
        }
    }
}</pre>
            </div>
            
            <h5 class="mt-4">Leçons apprises</h5>
            <div class="alert alert-info">
              <ul>
                <li>Les tests contractuels sont essentiels pour les microservices</li>
                <li>Il faut tester à la fois le producteur et le consommateur</li>
                <li>Les tests E2E doivent être limités aux scénarios critiques</li>
                <li>La gestion des données de test est complexe dans un système distribué</li>
              </ul>
            </div>
          `;
          break;

        default:
          title = 'Cas pratique technique';
          content = `
            <div class="alert alert-info">
              <p>Nous préparons actuellement une étude de cas détaillée sur ce sujet.</p>
              <p class="mb-0">Revenez bientôt pour découvrir cette analyse complète avec exemples de code et bonnes pratiques.</p>
            </div>
          `;
      }

      detailsModalTitle.textContent = title;
      detailsModalContent.innerHTML = content;
      detailsModal.show();
    }
  </script>
</body>
</html>
